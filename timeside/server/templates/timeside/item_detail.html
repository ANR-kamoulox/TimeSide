{% extends "timeside/base.html" %}
{% load i18n %}

{% block extra_stylesheets %}
{% endblock %}

{% block extra_javascript %}
<script type="text/javascript">

$(window).ready(function() {
    div_wav_sub = waveform("waveform");
    $('.timeline').each( function (){
        var div_id = $(this).attr('id');
        var json_url = $(this).attr('json');
        timeline_get_data(json_url, div_id);
    });
});

angular.module('timeside', ['angular-bootstrap-select', 'angular-bootstrap-select.extra']);

function SelectCtrl($scope) {
  $scope.form = undefined;
}

</script>
{% endblock %}

{% block content %}

<h1>{{ object.title }}</h1>

{% block html5-player %}
 <audio controls preload="none">
  <source src="download/ogg" type="audio/ogg">
  <source src="download/mp3" type="audio/mpeg">
Your browser does not support the audio element.
</audio>
{% endblock html5-player %}

<div id="waveform"></div>
<div id="waveform_sub"></div>

<h2>Metadata</h2>

<ul>
   <li>File: {{ object.file }}</li>
   {% if object.url %}<li>url : {{ object.url }}</li>{% endif %}
   <li>mime_type : {{ object.mime_type }}</li>
   <li>sha1 : {{ object.sha1 }}</li>
   <li>hdf5 : {{ object.hdf5 }}</li>
   <li>uuid : {{ object.uuid }}</li>
   <li>author: {{ object.author }}</li>
   <li>lock : {{ object.lock }}</li>
</ul>

<h2>Results</h2>

<div class="page-header">
    <h1>Angular bootstrap-select test</h1>
    <code>{{form || 'undefined'}}</code>
</div>

<select ng-model="form" class="selectpicker">
    <option>Mustard</option>
    <option>Ketchup</option>
    <option>Relish</option>
</select>

<ul>
{% for result in object.results.all %}
    <li>{{ result.preset.processor }} ({{ result.uuid }})
    {% if 'image' in result.mime_type %}
        <img src="{% url "timeside-result-png" result.id %}">
    {% elif 'audio' in result.mime_type or 'ogg' in result.mime_type%}
     <br>
     <audio controls preload="none">
        <source src="{% url "timeside-result-audio" result.id %}" type="{{ result.mime_type }}">
     </audio>
    {% elif 'video' in result.mime_type %}
     <br>
     <video controls preload="none">
        <source src="{% url "timeside-result-audio" result.id %}" type="{{ result.mime_type }}">
     </video>
    {% else %}
        <a href="{% url "timeside-result-json" result.id %}">JSON</a>
        <br>
        <div id="graph-{{ result.id }}" class="timeline" json="{% url "timeside-result-json" result.id %}"></div>
    {% endif %}
    </li>
{% endfor %}

<ul>

{% endblock content %}
